<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.18">
<meta name="keywords" content="OpenAI Servicios Aplicaciones Express NodeJS">
<title>OpenAI</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge, pre.rouge .w {
  color: #24292f;
  background-color: #f6f8fa;
}
pre.rouge .k, pre.rouge .kd, pre.rouge .kn, pre.rouge .kp, pre.rouge .kr, pre.rouge .kt, pre.rouge .kv {
  color: #cf222e;
}
pre.rouge .gr {
  color: #f6f8fa;
}
pre.rouge .gd {
  color: #82071e;
  background-color: #ffebe9;
}
pre.rouge .nb {
  color: #953800;
}
pre.rouge .nc {
  color: #953800;
}
pre.rouge .no {
  color: #953800;
}
pre.rouge .nn {
  color: #953800;
}
pre.rouge .sr {
  color: #116329;
}
pre.rouge .na {
  color: #116329;
}
pre.rouge .nt {
  color: #116329;
}
pre.rouge .gi {
  color: #116329;
  background-color: #dafbe1;
}
pre.rouge .kc {
  color: #0550ae;
}
pre.rouge .l, pre.rouge .ld, pre.rouge .m, pre.rouge .mb, pre.rouge .mf, pre.rouge .mh, pre.rouge .mi, pre.rouge .il, pre.rouge .mo, pre.rouge .mx {
  color: #0550ae;
}
pre.rouge .sb {
  color: #0550ae;
}
pre.rouge .bp {
  color: #0550ae;
}
pre.rouge .ne {
  color: #0550ae;
}
pre.rouge .nl {
  color: #0550ae;
}
pre.rouge .py {
  color: #0550ae;
}
pre.rouge .nv, pre.rouge .vc, pre.rouge .vg, pre.rouge .vi, pre.rouge .vm {
  color: #0550ae;
}
pre.rouge .o, pre.rouge .ow {
  color: #0550ae;
}
pre.rouge .gh {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .gu {
  color: #0550ae;
  font-weight: bold;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .sc, pre.rouge .dl, pre.rouge .sd, pre.rouge .s2, pre.rouge .se, pre.rouge .sh, pre.rouge .sx, pre.rouge .s1, pre.rouge .ss {
  color: #0a3069;
}
pre.rouge .nd {
  color: #8250df;
}
pre.rouge .nf, pre.rouge .fm {
  color: #8250df;
}
pre.rouge .err {
  color: #f6f8fa;
  background-color: #82071e;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cm, pre.rouge .cp, pre.rouge .cpf, pre.rouge .c1, pre.rouge .cs {
  color: #6e7781;
}
pre.rouge .gl {
  color: #6e7781;
}
pre.rouge .gt {
  color: #6e7781;
}
pre.rouge .ni {
  color: #24292f;
}
pre.rouge .si {
  color: #24292f;
}
pre.rouge .ge {
  color: #24292f;
  font-style: italic;
}
pre.rouge .gs {
  color: #24292f;
  font-weight: bold;
}
</style>
</head>
<body class="book toc2 toc-right">
<div id="header">
<h1>OpenAI</h1>
<div id="toc" class="toc2">
<div id="toctitle">Tabla de contenidos</div>
<ul class="sectlevel0">
<li><a href="#_primeros_pasos_con_azure_openai">Primeros pasos con Azure OpenAI</a>
<ul class="sectlevel1">
<li><a href="#_activación_de_la_suscripción_de_azure">Activación de la suscripción de Azure</a>
<ul class="sectlevel2">
<li><a href="#_introducción_a_azure">Introducción a Azure</a></li>
<li><a href="#_dar_de_alta_su_cuenta_microsoft_en_la_universidad_de_almería">Dar de alta su cuenta Microsoft en la Universidad de Almería</a></li>
<li><a href="#_solicitar_una_cuenta_azure_for_students">Solicitar una cuenta Azure for Students</a></li>
<li><a href="#_acceso_a_azure">Acceso a Azure</a></li>
</ul>
</li>
<li><a href="#_solicitud_de_acceso_a_modelos_gpt_3_y_gpt_4">Solicitud de acceso a modelos GPT-3 y GPT-4</a>
<ul class="sectlevel2">
<li><a href="#_introducción_a_openai">Introducción a OpenAI</a></li>
<li><a href="#_solicitar_acceso_a_modelos_gpt_3">Solicitar acceso a modelos GPT-3</a></li>
<li><a href="#_solicitar_acceso_a_modelos_gpt_4">Solicitar acceso a modelos GPT-4</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_aplicación_en_nodejs">Aplicación en NodeJS</a>
<ul class="sectlevel1">
<li><a href="#_hola_mundo_en_openai"><em>Hola mundo</em> en OpenAI</a>
<ul class="sectlevel2">
<li><a href="#_creación_del_recurso_de_openai_en_azure">Creación del recurso de OpenAI en Azure</a></li>
<li><a href="#_implementar_un_modelo_de_openai_en_azure">Implementar un modelo de OpenAI en Azure</a></li>
<li><a href="#_recopilar_datos_para_utilizar_la_api_de_openai">Recopilar datos para utilizar la API de OpenAI</a></li>
<li><a href="#_creación_de_endpoint_en_expressjs">Creación de Endpoint en ExpressJS</a></li>
<li><a href="#_prueba_del_endpoint">Prueba del Endpoint</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Computación en la Nube, Servicios y Aplicaciones. Francisco García &lt;<a href="mailto:paco.garcia@ual.es">paco.garcia@ual.es</a>&gt;, Joaquín Cañadas &lt;<a href="mailto:jjcanada@ual.es">jjcanada@ual.es</a>&gt;</p>
</div>
<div class="paragraph">
<p><em>Version</em> <strong>0.23.0</strong></p>
</div>
<div class="exampleblock">
<div class="title">Objetivos</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Utilizar servicios de avanzados en la nube para la realización de tareas inteligentes.</p>
</li>
<li>
<p>Introducción al uso de servicios de inteligencia artificial mediante el uso de la API de OpenAI.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Realización y entrega</div>
<div class="paragraph">
<p>La realización de estas actividades se realizará de forma <strong>individual</strong>.
La entrega será mediante el envío de un informe y el acceso al profesor a los servicios configurados por cada estudiante, para la revisión y evaluación de los mismos.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Esta es la versión <strong>0.23.0</strong> de este documento.</p>
</div>
</div>
</div>
<h1 id="_primeros_pasos_con_azure_openai" class="sect0">Primeros pasos con Azure OpenAI</h1>
<div class="openblock partintro">
<div class="content">
<div class="exampleblock">
<div class="title">Objetivos</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Vamos a solicitar creditos para poder usar Azure de forma gratuita.</p>
</li>
<li>
<p>Después, solicitaremos una cuenta de Azure OpenAI y acceso a los modelos de lenguaje de GPT-3 y GPT-4.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_activación_de_la_suscripción_de_azure">Activación de la suscripción de Azure</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="title">Objetivos</div>
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Activación de la suscripción de Azure.</p>
</li>
<li>
<p>Solicitud de créditos para estudiantes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_introducción_a_azure">Introducción a Azure</h3>
<div class="paragraph">
<p><strong>Azure</strong> es una plataforma de <strong>cloud computing</strong> que ofrece una amplia gama de servicios para la creación de aplicaciones y servicios en la nube.</p>
</div>
<div class="paragraph">
<p>Entre los servicios que ofrece Azure podemos destacar:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Azure DevOps</strong>: Herramienta de gestión de proyectos de desarrollo de software.</p>
</li>
<li>
<p><strong>Azure Cognitive Services</strong>: Herramienta de inteligencia artificial.</p>
</li>
<li>
<p><strong>Azure OpenAI</strong>: Herramienta para el acceso a modelos de inteligencia artificial de OpenAI.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_dar_de_alta_su_cuenta_microsoft_en_la_universidad_de_almería">Dar de alta su cuenta Microsoft en la Universidad de Almería</h3>
<div class="paragraph">
<p>Para ello, seguir los pasos indicados en el siguiente enlace: <a href="https://www.ual.es/descargadesoftware/software-microsoft" class="bare">https://www.ual.es/descargadesoftware/software-microsoft</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Solamente en el caso de que no tuvieras activada tu cuenta Microsoft la UAL con anterioridad.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_solicitar_una_cuenta_azure_for_students">Solicitar una cuenta Azure for Students</h3>
<div class="paragraph">
<p>Utilizar el siguiente enlace de Azure for Students: <a href="https://azure.microsoft.com/es-es/free/students/" class="bare">https://azure.microsoft.com/es-es/free/students/</a></p>
</div>
<div class="paragraph">
<p>Habrá que iniciar sesión con la cuenta Microsoft de la UAL.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Es posible que soliciten datos adicionales como los siguientes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>OFERTA:</strong> Azure para estudiantes</p>
</li>
<li>
<p><strong>ID. DE OFERTA:</strong> MS-AZR-0170P</p>
</li>
<li>
<p><strong>ENLACE:</strong> <a href="https://azure.microsoft.com/es-es/offers/ms-azr-0170p/" class="bare">https://azure.microsoft.com/es-es/offers/ms-azr-0170p/</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Azure para <strong>estudiantes</strong> ofrece <strong>$100 en créditos de Azure</strong> que puede usar durante los <strong>12 primeros meses</strong> junto con algunos servicios gratuitos (sujetos a cambios), <strong>sin necesidad de tarjeta de crédito</strong>.</p>
</div>
<div class="paragraph">
<p>El crédito que no se haya utilizado <strong>no se puede transferir a los meses siguientes ni a otras suscripciones de Azure</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Si agota el crédito disponible, se deshabilitará su suscripción de Azure</strong>. En ese caso, puede cambiar a una suscripción Pago por uso.</p>
</div>
</div>
<div class="sect2">
<h3 id="_acceso_a_azure">Acceso a Azure</h3>
<div class="paragraph">
<p>Para acceder a Azure, utilizar el siguiente enlace: <a href="https://portal.azure.com" class="bare">https://portal.azure.com</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_solicitud_de_acceso_a_modelos_gpt_3_y_gpt_4">Solicitud de acceso a modelos GPT-3 y GPT-4</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_introducción_a_openai">Introducción a OpenAI</h3>
<div class="paragraph">
<p>OpenAI es una organización sin ánimo de lucro que busca desarrollar inteligencia artificial segura y beneficios para la humanidad.</p>
</div>
<div class="paragraph">
<p>Algunas de los modelos de lenguaje que han desarrollado son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GPT-3: Generative Pre-trained Transformer 3</p>
</li>
<li>
<p>GPT-4: Generative Pre-trained Transformer 4</p>
</li>
<li>
<p>DALL-E: Discrete VAE for Conditional Image Generation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Algunos de estos modelos estan disponibles a través de Azure <strong>OpenAI</strong> y se pueden utilizar con el credito de estudiantes de Azure.</p>
</div>
</div>
<div class="sect2">
<h3 id="_solicitar_acceso_a_modelos_gpt_3">Solicitar acceso a modelos GPT-3</h3>
<div class="paragraph">
<p>Para empezar a trabajar necesitamos solicitar acceso a los modelos GPT-3 mediante el siguiente formulario: <a href="https://aka.ms/oai/access" class="bare">https://aka.ms/oai/access</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Hay que marcar la casilla de <strong>Text and code models</strong> para poder utilizar GPT-3.
También es necesario introducir el <strong>id de la suscripción de Azure.</strong> Para obtenerlo, hay que ir a la suscripción de Azure y copiar el id que aparece en la URL.
Marcar <strong>ISV</strong> como tipo de organización y <strong>250-499</strong> como número de empleados.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Pasados unos días, recibiremos un correo con la confirmación de acceso a los modelos.</p>
</div>
</div>
<div class="sect2">
<h3 id="_solicitar_acceso_a_modelos_gpt_4">Solicitar acceso a modelos GPT-4</h3>
<div class="paragraph">
<p>Para solicitar acceso a los modelos GPT-4, hay que rellenar el siguiente formulario: <a href="https://aka.ms/oai/get-gpt4" class="bare">https://aka.ms/oai/get-gpt4</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Solo se puede solicitar teniendo acceso a los modelos GPT-3.
Es necesario introducir el id de solicitud de acceso a los modelos GPT-3.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<h1 id="_aplicación_en_nodejs" class="sect0">Aplicación en NodeJS</h1>
<div class="openblock partintro">
<div class="content">
<div class="exampleblock">
<div class="title">Objetivos</div>
<div class="content">
<div class="paragraph">
<p>Como construir aplicaciones que utilicen la api de OpenAI en NodeJS utilizando el framework ExpressJS</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Realizar una implementación de un modelo de lenguaje en Azure OpenAI Studio</p>
</li>
<li>
<p>Crear un endpoint en NodeJS que utilice el modelo de lenguaje mediante la api de OpenAI y ExpressJS</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hola_mundo_en_openai"><em>Hola mundo</em> en OpenAI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A continuación se muestra un ejemplo de <strong>utilización de la API de OpenAI en un proyecto NodeJS utilizando ExpressJS</strong>.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p>Se desarrollará un servicio que permita a un usuario introducir un listado de películas y que el servicio devuelva una lista de películas recomendadas al usuario y con la razón de la recomendación.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creación_del_recurso_de_openai_en_azure">Creación del recurso de OpenAI en Azure</h3>
<div class="paragraph">
<p>Para poder utilizar la API de OpenAI es necesario crear un recurso de OpenAI en Azure. Para ello, debemos seguir los siguientes pasos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Acceder a <a href="https://portal.azure.com">Azure Portal</a>, seleccionar <strong>Azure OpenAI</strong> y seleccionar el botón <code>+ Crear</code>.</p>
</li>
<li>
<p>Seleccionar la suscripción y el grupo de recursos donde se va a crear el recurso de OpenAI. Si no se tiene ninguno, se puede crear uno nuevo.</p>
</li>
<li>
<p>Seleccionar el nombre del recurso, la región y el plan de tarifas. Como nombre del recurso se puede poner <code>usuario-openai</code>, la mejor región es <code>South Central US</code> y el plan de tarifas es <code>S0</code>.</p>
</li>
<li>
<p>Seleccionar el botón <code>Crear</code>.</p>
</li>
<li>
<p>Una vez creado el recurso, se puede acceder a la página de administración del recurso de OpenAI en Azure.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_implementar_un_modelo_de_openai_en_azure">Implementar un modelo de OpenAI en Azure</h3>
<div class="paragraph">
<p>Para poder utilizar un modelo de OpenAI es necesario implementarlo en Azure. Para ello, debemos seguir los siguientes pasos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Acceder a <a href="https://oai.azure.com">Azure OpenAI Studio</a>.</p>
</li>
<li>
<p>Seleccionar la opción <code>Modelos</code> y el botón <code>Implementar modelo</code>.</p>
</li>
<li>
<p>Seleccionar el modelo que se quiere implementar. En este caso, se va a implementar el modelo <code>gpt-35-turbo</code>.</p>
</li>
<li>
<p>Establecer un nombre para la implementación. Por ejemplo, <code>gpt3</code>.</p>
</li>
<li>
<p>Pulsar en el botón <code>Crear</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_recopilar_datos_para_utilizar_la_api_de_openai">Recopilar datos para utilizar la API de OpenAI</h3>
<div class="paragraph">
<p>Necesitamos los siguientes datos para poder utilizar la API de OpenAI:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>API Key</strong>: Se puede obtener en la página de administración del recurso de OpenAI en Azure.</p>
</li>
<li>
<p><strong>Endpoint</strong>: Se puede obtener en la página de administración del recurso de OpenAI en Azure.</p>
</li>
<li>
<p><strong>Deployment</strong>: Nombre de la implementación del modelo de OpenAI en Azure.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_creación_de_endpoint_en_expressjs">Creación de Endpoint en ExpressJS</h3>
<div class="paragraph">
<p>Podemos partir de un proyecto NodeJS con ExpressJS. En este caso, se ha utilizado el proyecto <a href="https://github.com/ualcnsa/nodeapp" class="bare">https://github.com/ualcnsa/nodeapp</a>. Este proyecto implementa un hola mundo en NodeJS con ExpressJS.</p>
</div>
<div class="paragraph">
<p>El primer paso es instalar las dependencias necesarias para poder utilizar la API de OpenAI. Para ello, se debe ejecutar el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell">npm <span class="nb">install </span>openai</code></pre>
</div>
</div>
<div class="paragraph">
<p>En segundo lugar, se debe crear un fichero <code>src/config/configuration.js</code> con el siguiente contenido:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="javascript"><span class="kd">const</span> <span class="nx">openai</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">openai</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">configuration</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">openai</span><span class="p">:</span> <span class="k">new</span> <span class="nx">openai</span><span class="p">.</span><span class="nc">Configuration</span><span class="p">({</span>
    <span class="na">basePath</span><span class="p">:</span> <span class="dl">'</span><span class="s1">https://ggf906-openai.openai.azure.com/openai/deployments/gpt3</span><span class="dl">'</span><span class="p">,</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="na">apiKey</span><span class="p">:</span> <span class="dl">'</span><span class="s1">3f9f9f99f9f9f9f9f9f9f9f9f9f9f9f</span><span class="dl">'</span><span class="p">,</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="p">}),</span>
<span class="p">};</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">configuration</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Endpoint de la API de OpenAI. <code>ggf906-openai</code> es el nombre del recurso de OpenAI en Azure y <code>gpt3</code> es el nombre de la implementación del modelo de OpenAI en Azure.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>API Key de la API de OpenAI.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>En tercer lugar, se debe crear un fichero <code>src/services/movie-recommendations.js</code> con el siguiente contenido:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="javascript"><span class="kd">const</span> <span class="nx">configuration</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">../config/configuration</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">class</span> <span class="nc">MovieRecommendationsService</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="nx">openAIApi</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">openai</span> <span class="o">=</span> <span class="nx">openAIApi</span><span class="p">;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nf">getMovieRecommendations</span><span class="p">({</span> <span class="nx">movies</span> <span class="p">})</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">completion</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="nx">openai</span><span class="p">.</span><span class="nf">createChatCompletion</span><span class="p">(</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="p">{</span>
        <span class="na">model</span><span class="p">:</span> <span class="dl">'</span><span class="s1">gpt-3.5-turbo</span><span class="dl">'</span><span class="p">,</span> <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="na">messages</span><span class="p">:</span> <span class="p">[</span> <i class="conum" data-value="4"></i><b>(4)</b>
          <span class="p">{</span>
            <span class="na">role</span><span class="p">:</span> <span class="dl">'</span><span class="s1">system</span><span class="dl">'</span><span class="p">,</span> <i class="conum" data-value="5"></i><b>(5)</b>
            <span class="na">content</span><span class="p">:</span>
              <span class="dl">'</span><span class="s1">Given a list of movies suggest 5 new movies. Reply with only the answer in JSON form and include no other commentary. It is an array of objects called movies with title, director, year and reason.</span><span class="dl">'</span><span class="p">,</span> <i class="conum" data-value="6"></i><b>(6)</b>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="na">role</span><span class="p">:</span> <span class="dl">'</span><span class="s1">user</span><span class="dl">'</span><span class="p">,</span> <i class="conum" data-value="7"></i><b>(7)</b>
            <span class="na">content</span><span class="p">:</span> <span class="nx">movies</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="dl">'</span><span class="s1">,</span><span class="dl">'</span><span class="p">),</span> <i class="conum" data-value="8"></i><b>(8)</b>
          <span class="p">},</span>
        <span class="p">],</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
          <span class="dl">'</span><span class="s1">api-key</span><span class="dl">'</span><span class="p">:</span> <span class="nx">configuration</span><span class="p">.</span><span class="nx">openai</span><span class="p">.</span><span class="nx">apiKey</span><span class="p">,</span> <i class="conum" data-value="9"></i><b>(9)</b>
        <span class="p">},</span>
        <span class="na">params</span><span class="p">:</span> <span class="p">{</span>
          <span class="dl">'</span><span class="s1">api-version</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">2023-03-15-preview</span><span class="dl">'</span><span class="p">,</span> <i class="conum" data-value="10"></i><b>(10)</b>
        <span class="p">},</span>
      <span class="p">}</span>
    <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nf">extractJSON</span><span class="p">(</span><span class="nx">completion</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">message</span><span class="p">.</span><span class="nx">content</span><span class="p">);</span> <i class="conum" data-value="11"></i><b>(11)</b>
  <span class="p">}</span>

  <span class="nf">extractJSON</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">jsonStart</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nf">indexOf</span><span class="p">(</span><span class="dl">'</span><span class="s1">```json</span><span class="dl">'</span><span class="p">);</span> <i class="conum" data-value="12"></i><b>(12)</b>
    <span class="nf">if </span><span class="p">(</span><span class="nx">jsonStart</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <i class="conum" data-value="13"></i><b>(13)</b>
      <span class="kd">const</span> <span class="nx">movies</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">movies</span><span class="p">.</span><span class="nx">movies</span> <span class="p">?</span> <span class="nx">movies</span> <span class="p">:</span> <span class="p">{</span> <span class="nx">movies</span> <span class="p">};</span> <i class="conum" data-value="14"></i><b>(14)</b>
    <span class="p">}</span>
    <span class="kd">const</span> <span class="nx">jsonEnd</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nf">indexOf</span><span class="p">(</span><span class="dl">'</span><span class="s1">```</span><span class="dl">'</span><span class="p">,</span> <span class="nx">jsonStart</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">json</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nf">substring</span><span class="p">(</span><span class="nx">jsonStart</span> <span class="o">+</span> <span class="mi">7</span><span class="p">,</span> <span class="nx">jsonEnd</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="nx">json</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">MovieRecommendationsService</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Se inyecta la API de OpenAI.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Se llama al método <code>createChatCompletion</code> de la API de OpenAI que se encarga de interactuar con el modelo de OpenAI.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Se indica el modelo que se va a utilizar. En este caso, se va a utilizar el modelo <code>gpt-3.5-turbo</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Se indica el listado de mensajes que se van a enviar al modelo de OpenAI.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Se indica el rol del mensaje. En este caso, el rol es <code>system</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Se indica el comportamiento del modelo de OpenAI. En este caso, se indica que el modelo debe devolver un listado de películas recomendadas al usuario siguiendo un formato determinado y usando JSON.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Se indica el rol del mensaje. En este caso, el rol es <code>user</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Se indica el listado de películas que se van a enviar al modelo de OpenAI. Estas películas se reciben como parámetro del método / endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Se indica la API Key de la API de OpenAI.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>Se indica la versión de la API de OpenAI. Requisito de la versión de Azure OpenAI Studio.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>Se extrae el JSON del mensaje devuelto por el modelo de OpenAI. El resultado devuelto puede venir de diferentes maneras y es necesario procesarlo para obtener el JSON.</td>
</tr>
<tr>
<td><i class="conum" data-value="12"></i><b>12</b></td>
<td>Se trata de un mensaje formateado como código. Se busca el inicio del código.</td>
</tr>
<tr>
<td><i class="conum" data-value="13"></i><b>13</b></td>
<td>Si no se encuentra el inicio del código, se asume que el mensaje es un JSON.</td>
</tr>
<tr>
<td><i class="conum" data-value="14"></i><b>14</b></td>
<td>Se devuelve el JSON. Si no existe el campo <code>movies</code>, se devuelve el JSON como un objeto con el campo <code>movies</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Puesto que el uso de la API de OpenAI es un servicio de pago, se recomienda diseñar los mensajes utilizando <a href="https://chat.openai.com/">OpenAI Chat</a> para comprobar que el modelo devuelve el resultado esperado.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>En cuarto lugar, se ha modificado el fichero <code>src/app.js</code> para añadir el endpoint <code>/movie-recommendations</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="javascript"><span class="kd">const</span> <span class="nx">express</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">express</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">bodyParser</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">body-parser</span><span class="dl">'</span><span class="p">);</span>

<span class="p">...</span>

<span class="kd">const</span> <span class="nx">MovieRecommendationsService</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./services/movie-recommendations</span><span class="dl">'</span><span class="p">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="kd">const</span> <span class="nx">configuration</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">./config/configuration</span><span class="dl">'</span><span class="p">);</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="kd">const</span> <span class="p">{</span> <span class="nx">OpenAIApi</span> <span class="p">}</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">openai</span><span class="dl">'</span><span class="p">);</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nf">express</span><span class="p">();</span>
<span class="nx">app</span><span class="p">.</span><span class="nf">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nf">json</span><span class="p">());</span> <i class="conum" data-value="2"></i><b>(2)</b>

<span class="p">...</span>

<span class="nx">app</span><span class="p">.</span><span class="nf">put</span><span class="p">(</span><span class="dl">'</span><span class="s1">/post-test</span><span class="dl">'</span><span class="p">,</span> <span class="nf">async </span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Got body:</span><span class="dl">'</span><span class="p">,</span> <span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">recommendations</span> <span class="o">=</span> <span class="k">await</span> <span class="k">new</span> <span class="nc">MovieRecommendationsService</span><span class="p">(</span>
    <span class="k">new</span> <span class="nc">OpenAIApi</span><span class="p">(</span><span class="nx">configuration</span><span class="p">.</span><span class="nx">openai</span><span class="p">)</span>
  <span class="p">).</span><span class="nf">getMovieRecommendations</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span> <i class="conum" data-value="4"></i><b>(4)</b>
  <span class="nx">res</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="nx">recommendations</span><span class="p">);</span> <i class="conum" data-value="5"></i><b>(5)</b>
<span class="p">});</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">app</span><span class="p">;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Se importan las dependencias necesarias.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Se añade el middleware <code>body-parser</code> para poder parsear el cuerpo de la petición.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Se añade el endpoint <code>/movie-recommendations</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Se llama al servicio <code>MovieRecommendationsService</code> para obtener las recomendaciones de películas.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Se devuelve el resultado de las recomendaciones de películas.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_prueba_del_endpoint">Prueba del Endpoint</h3>
<div class="paragraph">
<p>Para probar el endpoint, se puede utilizar Postman. En este caso, se ha utilizado el siguiente JSON:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"movies"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"The Matrix"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Blade Runner"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"2001: A Space Odyssey"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>y se ha obtenido el siguiente resultado:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"movies"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Inception"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"director"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Christopher Nolan"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2010"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mind-bending sci-fi"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Interstellar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"director"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Christopher Nolan"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visually stunning sci-fi"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ex Machina"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"director"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alex Garland"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thought-provoking sci-fi"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Blade Runner 2049"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"director"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Denis Villeneuve"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sequel to Blade Runner"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Her"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"director"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Spike Jonze"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"year"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2013"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"romantic sci-fi"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>La llamada a la API de OpenAI lleva un coste asociado derivado del número de tokens que se envían al modelo. Para este número se tiene en cuenta tanto el número de tokens de los mensajes en el código como el número de tokens de los mensajes en el JSON de respuesta.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2023-04-19 18:53:06 UTC
</div>
</div>
</body>
</html>